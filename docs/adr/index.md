# 架构决策记录索引

## ADR 列表

| 编号 | 标题 | 状态 | 创建日期 | 最后更新 |
|------|------|------|----------|----------|
| [0001](0001-use-go-for-cli.md) | 使用 Go 语言开发 CLI 工具 | 接受 | 2026-02-03 | 2026-02-03 |
| [0002](0002-modular-architecture.md) | 模块化架构设计 | 接受 | 2026-02-03 | 2026-02-03 |
| [0003](0003-yaml-config.md) | 使用 YAML 配置文件 | 接受 | 2026-02-03 | 2026-02-03 |
| [0004](0004-plugin-checkers.md) | 插件化检查器架构 | 接受 | 2026-02-03 | 2026-02-03 |
| [0005](0005-multi-format-reports.md) | 多格式报告输出 | 接受 | 2026-02-03 | 2026-02-03 |
| [0006](0006-ast-parsing-strategy.md) | AST 解析策略选择 | 接受 | 2026-02-03 | 2026-02-03 |
| [0007](0007-single-pass-ast-traversal.md) | 一次遍历AST完成所有检查 | 接受 | 2026-02-03 | 2026-02-03 |

## ADR 状态统计

- **接受**: 7 个
- **提议**: 0 个
- **弃用**: 0 个
- **替代**: 0 个

## 按类别分类

### 技术选型
- [0001. 使用 Go 语言开发 CLI 工具](0001-use-go-for-cli.md)
- [0003. 使用 YAML 配置文件](0003-yaml-config.md)
- [0006. AST 解析策略选择](0006-ast-parsing-strategy.md)

### 架构设计
- [0002. 模块化架构设计](0002-modular-architecture.md)
- [0004. 插件化检查器架构](0004-plugin-checkers.md)
- [0007. 一次遍历AST完成所有检查](0007-single-pass-ast-traversal.md)

### 功能设计
- [0005. 多格式报告输出](0005-multi-format-reports.md)

## 重要决策总结

### 核心技术栈
- **语言**: Go 1.25.1+
- **配置**: YAML
- **SQL 解析**: TiDB Parser + AST
- **测试**: Go 内置测试框架

### 架构原则
- **模块化**: 清晰的模块划分和接口定义
- **可扩展性**: 插件化的检查器架构
- **可配置性**: 灵活的 YAML 配置系统
- **用户友好**: 多格式报告输出
- **高性能**: 单次遍历 AST 完成所有检查

### 设计模式
- **工厂模式**: 检查器工厂
- **策略模式**: 报告生成器
- **访问者模式**: AST 遍历
- **注册模式**: 检查器注册表
- **适配器模式**: 检查器适配器

## 决策影响分析

### 正面影响
1. **可维护性**: 模块化设计使代码易于维护
2. **可扩展性**: 插件化架构支持功能扩展
3. **可测试性**: 清晰的接口便于单元测试
4. **用户友好**: 多格式报告满足不同需求
5. **性能**: Go 语言 + 单次遍历 AST 提供优异性能
6. **准确性**: 基于 AST 的解析比正则表达式更准确

### 风险和挑战
1. **复杂性**: 模块化和插件化增加了系统复杂性
2. **学习成本**: 新开发者需要理解架构设计和 AST 结构
3. **维护成本**: 多种报告格式和检查器需要维护
4. **性能优化**: 单次遍历实现需要精心设计

## 未来考虑

### 潜在的 ADR
- 数据库连接器设计
- 并发处理策略
- 错误处理机制
- 日志记录策略
- 性能优化方案

### 架构演进
- 微服务化可能性
- 云原生支持
- 实时处理能力
- 分布式架构

---

*最后更新: 2026-02-03*
